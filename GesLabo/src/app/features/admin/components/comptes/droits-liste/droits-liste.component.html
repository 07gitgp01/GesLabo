<div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/dashboard">Tableau de Bord</a></li>
            <li class="breadcrumb-item active" aria-current="page">Gestion des Droits et Permissions</li>
        </ol>
    </nav>
    <div class="container-fluid bg-white">
        <h2 class="text-success"><i class="fas fa-user-shield"></i> GÃ©rer les Droits et Permissions</h2>
        <hr>
        <!-- Formulaire pour ajouter/modifier un utilisateur -->
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="username" class="form-label"><i class="fas fa-user"></i> Nom d'utilisateur</label>
                    <input type="text" class="form-control" id="username" formControlName="username" placeholder="Nom d'utilisateur" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="email" class="form-label"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" class="form-control" id="email" formControlName="email" placeholder="exemple@email.com" required>
                </div>
            </div>
            <div class="mb-3">
                <label for="permissions" class="form-label"><i class="fas fa-key"></i> Permissions</label>
                <select class="form-select" id="permissions" formControlName="permissions" multiple required>
                    <option *ngFor="let permission of permissionsList" [value]="permission">{{ permission }}</option>
                </select>
            </div>
            <button type="submit" class="btn btn-success"><i class="fas fa-plus"></i> Ajouter Utilisateur</button>
        </form>
        <hr>
        <!-- Liste des utilisateurs -->
        <h3 class="text-primary">Liste des Utilisateurs</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nom d'utilisateur</th>
                    <th>Email</th>
                    <th>Permissions</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of users; let i = index">
                    <!-- <tr *ngFor="let user of liste; let i = index; let perm of users"> -->
                    <td>{{ i + 1 }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.permissions.join(', ') }}</td>
                    <td>
                        <button class="btn btn-danger btn-sm" (click)="deleteUser(user.id)"><i class="fas fa-trash"></i> Supprimer</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
  